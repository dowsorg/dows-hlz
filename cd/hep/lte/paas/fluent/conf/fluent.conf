<source>
    @type forward
    port 24224
    bind 0.0.0.0
</source>


<source>
    @type tail
    @label @saveData
    path /etc/logs/saveData/**/**/*
    tag saveData.*
    refresh_interval 5s
    read_from_head true
    limit_recently_modified 86400
    follow_inodes true
    pos_file /etc/logs/message_30.log
    <parse>
      @type none
    </parse>
</source>

<source>
  @type tail
  @label @condition
  path /etc/logs/condition/**/**/*
  tag condition.*
  refresh_interval 10s
  read_from_head true
  limit_recently_modified 86400
  read_from_head true
  follow_inodes true
  pos_file /etc/logs/message_29.log
  <parse>
    @type none
  </parse>
</source>



<label @saveData>
  <match>
    @type copy
    <store>
      @type elasticsearch
      host "elasticsearch"
      port 9200
      logstash_format true
      logstash_prefix saveData
      logstash_dateformat %Y%m%d
      include_tag_key true
      type_name access_log
      tag_key @log_name
      suppress_type_name true
      include_timestamp true
      ssl_verify    false
      <buffer>
        flush_interval 2s
      </buffer>
    </store>
    <store>
      @type stdout
    </store>
  </match>
</label>


<label @condition>
  <match>
    @type copy
    <store>
      @type elasticsearch
      host "elasticsearch"
      port 9200
      logstash_format true
      logstash_prefix condition
      logstash_dateformat %Y%m%d
      include_tag_key true
      type_name access_log
      tag_key @log_name
      suppress_type_name true
      <buffer>
        flush_interval 5s
      </buffer>
      include_timestamp true
      ssl_verify   false
    </store>
    <store>
      @type stdout
    </store>
  </match>
</label>