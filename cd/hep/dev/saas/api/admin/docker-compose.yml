version: '3'
services:
  api-hep-admin-dev:
    image: 192.168.1.60:7080/hep/api-hep-admin-dev:$TAG
    restart: on-failure:3
    container_name: api-hep-admin-dev
    environment:
      - TZ=$TZ
      - JVM_OPTS=-server  -Xmx2048m -Xms1024m
      - JAVA_OPTS=-Djasypt.encryptor.password=02700083-9fd9-4b82-a4b4-9177e0560e92 -Dspring.config.location=/dows/saas/hep-admin/configs/ -Dspring.profiles.active=dev
      #- APM=-javaagent:/dows/paas/apm/skywalking-agent/skywalking-agent.jar -Dskywalking.agent.service_name=hep-admin-dev -Dskywalking.collector.backend_service=192.168.1.60:11800
    ports:
      - $EHP:8080
      - $EWP:80
      - $EDP:5005
    volumes:
      - ./logs:/dows/saas/hep-admin/logs
      - ./configs:/dows/saas/hep-admin/configs
      - ./resources:/data/resources/images/hep
      #- /dows/paas/apm/skywalking-agent-8.16.0:/dows/paas/apm/skywalking-agent
    networks:
      - dev_net
#    networks:
#      dev_net:
#        ipv4_address: 172.18.0.6
    #服务的CPU使用被限制在最多50%的CPU能力，内存使用被限制在最多500MB。同时，这个服务至少需要25%的CPU和200MB的内存
    deploy:
      resources:
        limits:
          memory: 1024M
        reservations:
          memory: 512M

networks:
  dev_net:
    external: true
